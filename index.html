<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JS AJAX</title>
    <style>
      table,
      th,
      td {
        border: 1px solid black;
        border-collapse: collapse;
      }
      th,
      td {
        padding: 5px;
      }
    </style>
  </head>
  <body>
    <h2>Data Kepemilikan Buku</h2>
    <div>
      <p>
        <b>Nama Toko: </b>
        <span id="A1"></span>
      </p>
      <p>
        <b>Pengarang: </b>
        <span id="A2"></span>
      </p>
      <p>
        <b>Alamat: </b>
        <span id="A3"></span>
      </p>
      <button onclick="loadDoc()">Get data</button>
      <button onclick="createTable()">Get data book</button>
    </div>
    <div>
      <table id="cdTable"></table>
    </div>

    <script>
      function loadDoc() {
        const xhttp = new XMLHttpRequest();
        xhttp.onload = function () {
          const jsonData = JSON.parse(this.responseText);
          const namaToko = jsonData.namaToko;
          const pengarang = jsonData.pengarang;
          const alamat = jsonData.alamat;
          document.getElementById("A1").innerHTML = namaToko;
          document.getElementById("A2").innerHTML = pengarang;
          document.getElementById("A3").innerHTML = alamat;
        };
        xhttp.open("GET", "data.json", true);
        xhttp.send();
      }

      function createTable() {
        const xhttp = new XMLHttpRequest();
        xhttp.onload = function () {
          if (this.readyState === 4 && this.status === 200) {
            // Check for successful request
            const jsonData = JSON.parse(this.responseText);
            let table = "<tr><th>Artist</th><th>Title</th></tr>";

            for (const item of jsonData) {
              // Use for...of for cleaner iteration
              table += `<tr><td>${item.artist}</td><td>${item.title}</td></tr>`; // Template literals for readability
            }

            document.getElementById("cdTable").innerHTML = table;
          } else {
            console.error("Error fetching data:", this.statusText); // Handle potential errors
          }
        };

        xhttp.open("GET", "dataBuku.json", true);
        xhttp.send();
      }
    </script>
  </body>
</html>
